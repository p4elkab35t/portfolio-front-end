import { c as create_ssr_component, d as add_attribute, b as escape } from './ssr-DrBziz2r.js';

const css = {
  code: ".annotation_block.svelte-9lcm3i{position:fixed;padding:20px;background-color:#2f2f2f;font-size:1.5rem;z-index:1000;font-weight:400;max-width:30%;color:#cfcfcf}.arrow.svelte-9lcm3i{position:absolute;width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid #2f2f2f;top:-10px;left:50px;transform:translateX(-50%)}.annotation_link.svelte-9lcm3i{cursor:pointer;border-bottom:2px dashed #cfcfcf;color:#cfcfcf}.annotation_container.svelte-9lcm3i{position:relative;display:inline-block}",
  map: '{"version":3,"file":"AnnotationMark.svelte","sources":["AnnotationMark.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount } from \\"svelte\\";\\nexport let description;\\nexport let font_size;\\nlet text;\\nlet annotation;\\nlet hiddenAnnotation = true;\\nfunction showHideAnnotation(event) {\\n  hideOtherAnnotations();\\n  updateDimensions();\\n  calculateAnnotationPosition();\\n  annotation.classList.toggle(\\"hidden\\");\\n  moveArrowUnuderCursor(event);\\n}\\nlet textX = 0;\\nlet textY = 0;\\nlet textWidth = 0;\\nlet textHeight = 0;\\nlet windowWidth = 0;\\nlet windowHeight = 0;\\nlet annotationWidth = 0;\\nlet annotationHeight = 0;\\nlet annotationX = 0;\\nlet annotationY = 0;\\nconst moveArrowUnuderCursor = (event) => {\\n  const arrow = annotation.querySelector(\\".arrow\\");\\n  if (arrow) {\\n    arrow.setAttribute(\\"style\\", `left: ${event.clientX - annotationX}px;`);\\n  }\\n};\\nconst hideOtherAnnotations = () => {\\n  const annotations = document.querySelectorAll(\\".annotation_block\\");\\n  annotations.forEach((annotationElement) => {\\n    if (annotationElement !== annotation) {\\n      annotationElement.classList.add(\\"hidden\\");\\n    }\\n  });\\n};\\nconst updateDimensions = () => {\\n  if (text) {\\n    const rect = text.getBoundingClientRect();\\n    textX = rect.x;\\n    textY = rect.y;\\n    textWidth = rect.width;\\n    textHeight = rect.height;\\n  }\\n  if (annotation) {\\n    const rect = annotation.getBoundingClientRect();\\n    annotationWidth = rect.width;\\n    annotationHeight = rect.height;\\n  }\\n  if (hiddenAnnotation) return;\\n  calculateAnnotationPosition();\\n};\\nconst calculateAnnotationPosition = () => {\\n  console.log(`text: x-${textX}px, y-${textY}px, width-${textWidth}px, height-${textHeight}px`);\\n  console.log(`annotation: width-${annotationWidth}px, height-${annotationHeight}px`);\\n  console.log(`window: width-${windowWidth}px, height-${windowHeight}px`);\\n  annotationX = textX + annotationWidth > windowWidth ? windowWidth - annotationWidth - 20 : textX - 40;\\n  annotationY = textY + textHeight + annotationHeight + 10 > windowHeight ? windowHeight - annotationHeight - 10 : textY + textHeight + 10;\\n};\\n$: updateDimensions();\\n$: annotationX, annotationY;\\nonMount(() => {\\n  text?.addEventListener(\\"click\\", showHideAnnotation);\\n  window.addEventListener(\\"resize\\", updateDimensions);\\n  window.addEventListener(\\"scroll\\", updateDimensions);\\n  updateDimensions();\\n  hideOtherAnnotations();\\n  return () => {\\n    window.removeEventListener(\\"resize\\", updateDimensions);\\n  };\\n});\\n<\/script>\\r\\n\\r\\n<style>\\r\\n.annotation_block {\\r\\n    position: fixed;\\r\\n    padding: 20px;\\r\\n    background-color: #2f2f2f;\\r\\n    /* top: 10px; */\\r\\n    font-size: 1.5rem;\\r\\n    z-index: 1000;\\r\\n    font-weight: 400;\\r\\n    max-width: 30%;\\r\\n    color: #cfcfcf;\\r\\n}\\r\\n.arrow {\\r\\n    position: absolute;\\r\\n    width: 0;\\r\\n    height: 0;\\r\\n    border-left: 10px solid transparent;\\r\\n    border-right: 10px solid transparent;\\r\\n    border-bottom: 10px solid #2f2f2f;\\r\\n    top: -10px;\\r\\n    left: 50px;\\r\\n    transform: translateX(-50%);\\r\\n}\\r\\n.annotation_link {\\r\\n    cursor: pointer;\\r\\n    border-bottom: 2px dashed #cfcfcf;\\r\\n    color: #cfcfcf;\\r\\n}\\r\\n.annotation_container {\\r\\n    position: relative;\\r\\n    display: inline-block;\\r\\n}\\r\\n</style>\\r\\n\\r\\n<svelte:window bind:innerWidth={windowWidth} bind:innerHeight={windowHeight} />\\r\\n\\r\\n\\r\\n<div class=\\"annotation_container\\">\\r\\n<button class=\\"annotation_link\\" bind:this={text}>\\r\\n    <slot />\\r\\n</button>\\r\\n</div>\\r\\n<div bind:this={annotation} style=\\"border-radius: calc({font_size}rem*0.20); font-size: {font_size}rem; left: {annotationX}px; top: {annotationY}px;\\" class=\\"annotation_block\\">\\r\\n    {description}\\r\\n    <div class=\\"arrow\\">\\r\\n\\r\\n    </div>\\r\\n</div>"],"names":[],"mappings":"AA2EA,+BAAkB,CACd,QAAQ,CAAE,KAAK,CACf,OAAO,CAAE,IAAI,CACb,gBAAgB,CAAE,OAAO,CAEzB,SAAS,CAAE,MAAM,CACjB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,GAAG,CACd,KAAK,CAAE,OACX,CACA,oBAAO,CACH,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,CAAC,CACT,WAAW,CAAE,IAAI,CAAC,KAAK,CAAC,WAAW,CACnC,YAAY,CAAE,IAAI,CAAC,KAAK,CAAC,WAAW,CACpC,aAAa,CAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CACjC,GAAG,CAAE,KAAK,CACV,IAAI,CAAE,IAAI,CACV,SAAS,CAAE,WAAW,IAAI,CAC9B,CACA,8BAAiB,CACb,MAAM,CAAE,OAAO,CACf,aAAa,CAAE,GAAG,CAAC,MAAM,CAAC,OAAO,CACjC,KAAK,CAAE,OACX,CACA,mCAAsB,CAClB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,YACb"}'
};
const AnnotationMark = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let { description } = $$props;
  let { font_size } = $$props;
  let text;
  let annotation;
  let annotationX = 0;
  let annotationY = 0;
  if ($$props.description === void 0 && $$bindings.description && description !== void 0) $$bindings.description(description);
  if ($$props.font_size === void 0 && $$bindings.font_size && font_size !== void 0) $$bindings.font_size(font_size);
  $$result.css.add(css);
  return ` <div class="annotation_container svelte-9lcm3i"><button class="annotation_link svelte-9lcm3i"${add_attribute("this", text, 0)}>${slots.default ? slots.default({}) : ``}</button></div> <div style="${"border-radius: calc(" + escape(font_size, true) + "rem*0.20); font-size: " + escape(font_size, true) + "rem; left: " + escape(annotationX, true) + "px; top: " + escape(annotationY, true) + "px;"}" class="annotation_block svelte-9lcm3i"${add_attribute("this", annotation, 0)}>${escape(description)} <div class="arrow svelte-9lcm3i" data-svelte-h="svelte-1vdzrcm"></div></div>`;
});

export { AnnotationMark as A };
//# sourceMappingURL=AnnotationMark-DFsCMtSz.js.map
