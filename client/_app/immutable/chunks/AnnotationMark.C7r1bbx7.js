import{s as R,d as U,a as Y,u as j,g as N,b as P,o as F,e as S}from"./scheduler.B0sxDJPD.js";import{S as G,i as J,e as L,s as W,t as K,c as k,a as T,d as z,f as x,b as Q,v as Z,q as y,w as h,g as C,h as E,x as $,j as tt,n as et,o as nt}from"./index.3lqU4Bo6.js";const it=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,{window:q}=it;function st(i){let r,l,p,n,_,m,a,c="",d,f,w;U(i[10]);const b=i[9].default,o=Y(b,i,i[8],null);return{c(){r=L("div"),l=L("button"),o&&o.c(),p=W(),n=L("div"),_=K(i[0]),m=W(),a=L("div"),a.innerHTML=c,this.h()},l(t){r=k(t,"DIV",{class:!0});var s=T(r);l=k(s,"BUTTON",{class:!0});var g=T(l);o&&o.l(g),g.forEach(z),s.forEach(z),p=x(t),n=k(t,"DIV",{style:!0,class:!0});var u=T(n);_=Q(u,i[0]),m=x(u),a=k(u,"DIV",{class:!0,"data-svelte-h":!0}),Z(a)!=="svelte-1vdzrcm"&&(a.innerHTML=c),u.forEach(z),this.h()},h(){y(l,"class","annotation_link svelte-9lcm3i"),y(r,"class","annotation_container svelte-9lcm3i"),y(a,"class","arrow svelte-9lcm3i"),h(n,"border-radius","calc("+i[1]+"rem*0.20)"),h(n,"font-size",i[1]+"rem"),h(n,"left",i[2]+"px"),h(n,"top",i[3]+"px"),y(n,"class","annotation_block svelte-9lcm3i")},m(t,s){C(t,r,s),E(r,l),o&&o.m(l,null),i[11](l),C(t,p,s),C(t,n,s),E(n,_),E(n,m),E(n,a),i[12](n),d=!0,f||(w=$(q,"resize",i[10]),f=!0)},p(t,[s]){o&&o.p&&(!d||s&256)&&j(o,b,t,t[8],d?P(b,t[8],s,null):N(t[8]),null),(!d||s&1)&&tt(_,t[0]),(!d||s&2)&&h(n,"border-radius","calc("+t[1]+"rem*0.20)"),(!d||s&2)&&h(n,"font-size",t[1]+"rem"),(!d||s&4)&&h(n,"left",t[2]+"px"),(!d||s&8)&&h(n,"top",t[3]+"px")},i(t){d||(et(o,t),d=!0)},o(t){nt(o,t),d=!1},d(t){t&&(z(r),z(p),z(n)),o&&o.d(t),i[11](null),i[12](null),f=!1,w()}}}function ot(i,r,l){let{$$slots:p={},$$scope:n}=r,{description:_}=r,{font_size:m}=r,a,c;function d(e){M(),v(),I(),c.classList.toggle("hidden"),B(e)}let f=0,w=0,b=0,o=0,t=0,s=0,g=0,u=0,H=0,D=0;const B=e=>{const A=c.querySelector(".arrow");A&&A.setAttribute("style",`left: ${e.clientX-H}px;`)},M=()=>{document.querySelectorAll(".annotation_block").forEach(A=>{A!==c&&A.classList.add("hidden")})},v=()=>{if(a){const e=a.getBoundingClientRect();f=e.x,w=e.y,b=e.width,o=e.height}if(c){const e=c.getBoundingClientRect();g=e.width,u=e.height}},I=()=>{console.log(`text: x-${f}px, y-${w}px, width-${b}px, height-${o}px`),console.log(`annotation: width-${g}px, height-${u}px`),console.log(`window: width-${t}px, height-${s}px`),l(2,H=f+g>t?t-g-20:f-40),l(3,D=w+o+u+10>s?s-u-10:w+o+10)};F(()=>(a==null||a.addEventListener("click",d),window.addEventListener("resize",v),window.addEventListener("scroll",v),v(),M(),()=>{window.removeEventListener("resize",v)}));function V(){l(6,t=q.innerWidth),l(7,s=q.innerHeight)}function X(e){S[e?"unshift":"push"](()=>{a=e,l(4,a)})}function O(e){S[e?"unshift":"push"](()=>{c=e,l(5,c)})}return i.$$set=e=>{"description"in e&&l(0,_=e.description),"font_size"in e&&l(1,m=e.font_size),"$$scope"in e&&l(8,n=e.$$scope)},i.$$.update=()=>{i.$$.dirty&12},v(),[_,m,H,D,a,c,t,s,n,p,V,X,O]}class rt extends G{constructor(r){super(),J(this,r,ot,st,R,{description:0,font_size:1})}}export{rt as A,it as g};
